
# Macro 化简二维数组

![image](https://user-images.githubusercontent.com/95061623/149938158-c25d93fc-151c-4d09-8094-65cfe8066a84.png)


# Mars命令行输入

`java -jar [name of the mars].jar nc [name of the program].asm < [输入数据的文件名].in 1> a.out 2>err.txt`

# P2课下提交
## 01迷宫
# 题目

## **01迷宫**

1. 在mips教程部分我们出了一道挑战题留给大家探索——哈密顿回路，哈密顿回路问题是一道npc的问题，需要使用深度优先探索算法进行求解。而我们今天课下测试也准备了一道挑战性测试题：使用深度优先探索算法求解01迷宫的逃离路线个数（这道题通过与否不作为是否能参加P2课上的条件）。

**逃跑路线**

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b5c66478-bad9-43c0-8c6c-53af8aca7809/Untitled.png)

1. 左图表示的是一个4*5的01矩阵，这个矩阵就是一个01迷宫。
2. 如左图，以红色0作为起点，绿色0作为终点，每一次行进只能选择上下左右中值为0且未走过的位置，满足上述条件的路线，即为一条迷宫逃跑路线。如右图中，蓝色的路线即为一条逃跑路线。

### **题目描述**

1. 使用mips实现01迷宫路线数目计算。
2. 以0x00000000为数据段起始地址。
3. 输入一个n*m的01矩阵作为01迷宫，并给定他的起点与终点，求出他不同逃跑路线的数目（不同逃跑路线中可以有相同的部分，但是不能完全相同）。
4. 每组数据最多执行5,000,000条指令。

### **输入格式**

前两行输入两个整数n和m（n、m均为正整数并且小于等于7），分别代表01矩阵行数和列数。接下来的n*m行，每行输入1个整数（0或1），对应着01矩阵各个元素值(第i*m+j个整数为矩阵的第（i+1）行第j个元素，即一行一行输入)。接下来的四行分别代表迷宫的起点和终点，每行一个整数，分别代表起点与终点行数和列数。

### **输出格式**

只输出一个整数，代表逃跑路线的数目。

### **输入样例**

```
4
5
0
0
1
0
0
1
0
0
0
1
1
0
1
0
1
1
0
0
0
0
1
1
4
5

```

### **输出样例**

```
2

```

### Algorithm

**很坑的一点：**

如果按照之前排序教程自己分配栈空间，尽量分配大一点吧（800都会爆栈, 最后开了1600过的 ），因此还是**建议**，直接用`$sp`, 遇到要存的就-4， 要取出来就+4，注意出入栈顺序就完事了

---------------------------
## 阶乘

### **任务**

- 使用MIPS汇编语言编写一个求n的阶乘的汇编程序(不考虑延迟槽)。

### **具体要求**

- 第一行读取n
- 计算并输出n的阶乘，输出字符串长度小于等于1000
- 步数限制为200,000
- 请使用syscall结束程序：
    
    ```
    li $v0, 10
    syscall
    
    ```
    

### **样例**

- 给出以下输入：
    
    ```
    24
    
    ```
    
- 期望的输出为：
    
    ```
    620448401733239439360000
    
    ```
    
     
    

### 分析

#### Algorithm

显然需要高精度，而这题用的只需要高精度乘低精度的操作就好了（然而好像已经忘记高精度相乘怎么写了 😭）

那么我们从1~n循环，每次把存着答案的`ans`一位一位按位取出来，将其与当前的i （循环数）相乘，更新答案，记录进位即可

而这边有两点可以多考虑

- 如果按照整数数组的想法，一位存一个，那么就需要开4000个空间，32位的二进制存储空间只存了多位数当中的一位，显然觉得有点不划算，于是我们可以处理将每一个处理成字符，而MIPS中是以ascii码的形式存储字符的，因此扣去‘0’也就是48就可以得到的对应的数，于是每次加一个“翻译”和“编译”的过程就好
- 当乘法结束后，最后剩下的进位不止一位(最开始的踩坑点)，因此最后处理存储进位时，要一位一位获取，不让会有奇奇怪怪的字符

#### 错误分析

如上，最后位数的处理欠考虑，认为只有一位

--------------

# P2 课上

每题都给了对应的C代码（其中前两题是全部的代码，最后一个双关键字排序是给了冒泡排序的模板），具体没啥，好好翻译就完了。

注意多重循环的翻译，不要弄混淆了

以及递归的实现，熟练就好
